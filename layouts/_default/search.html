{{ define "main" }}
<div class="h-screen w-full bg-bg flex flex-col overflow-hidden">
  {{/* Header */}}
  <div class="flex-none z-50 py-4 w-full relative">
    {{ partial "header.html" . }}
  </div>

  {{/* Sidebar */}}
  {{ partial "posts/left-tab-nav.html" . }}

  <div class="flex-1 w-full relative overflow-hidden">
    <div id="scroll-container" class="absolute inset-0 w-full h-full overflow-y-auto no-scrollbar scroll-smooth pt-2 pb-24">

      {{/* Mobile Nav */}}
      <div class="md:hidden sticky top-0 z-30 flex justify-center pb-6 pointer-events-none">
        <div class="inline-flex items-center p-1.5 bg-white/80 rounded-full backdrop-blur-xl border border-white/50 shadow-sm pointer-events-auto">
          <a href="{{ "/posts/" | relLangURL }}" class="mobile-tab px-4 py-1.5 text-secondary no-underline font-medium text-sm">Year</a>
          <div class="w-px h-3 bg-black/10 mx-2"></div>
          <a href="{{ "/categories/" | relLangURL }}" class="mobile-tab px-3 py-1.5 text-secondary"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg></a>
          <a href="{{ "/tags/" | relLangURL }}" class="mobile-tab px-3 py-1.5 text-secondary"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path></svg></a>
          <a href="{{ "/search/" | relLangURL }}" class="mobile-tab px-3 py-1.5 active text-white bg-brand shadow-sm"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></a>
        </div>
      </div>

      <div class="w-full max-w-5xl mx-auto px-4 sm:px-8">
        <div class="relative min-h-[400px]">

          <div class="mb-10 text-center mt-8">
                        <span class="inline-block px-5 py-2 rounded-full bg-brand/5 text-brand font-bold text-2xl border border-brand/10 font-averia">
                            Search
                        </span>
          </div>

          {{/* Search Input */}}
          <div class="w-full mb-12">
            <div class="max-w-3xl mx-auto">
              <div class="relative w-full group">
                <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
                  <svg class="w-5 h-5 text-secondary/50 group-focus-within:text-brand transition-colors" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </div>
                <input type="text" id="search-input" class="block w-full pl-14 pr-5 py-4 bg-white/60 backdrop-blur-xl border border-white/60 rounded-3xl text-lg text-primary placeholder:text-secondary/40 shadow-sm focus:outline-none focus:ring-2 focus:ring-brand/20 focus:border-brand/50 transition-all duration-300" placeholder="Type to search..." autocomplete="off">
                <div id="search-loading" class="hidden absolute inset-y-0 right-0 pr-5 items-center">
                  <svg class="animate-spin h-5 w-5 text-brand" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>
                </div>
              </div>
            </div>
          </div>

          {{/* Results */}}
          <div id="search-results" class="w-full grid gap-4">
            <div class="text-center py-20 opacity-50">
              <p class="text-secondary/30 font-averia text-lg">Type something to start searching</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.basic.min.js"></script>
{{ $js := resources.Get "js/search.js" | js.Build (dict "Minify" true) | resources.Fingerprint }}
<script src="{{ $js.RelPermalink }}" defer></script>
{{ end }}