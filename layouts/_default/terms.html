{{ define "main" }}
<div class="h-screen w-full bg-bg flex flex-col overflow-hidden">

  {{/* 1. 顶部 Header */}}
  <div class="flex-none z-50 py-4 w-full relative">
    {{ partial "header.html" . }}
  </div>

  {{/* 2. 左侧导航 */}}
  {{ partial "posts/left-tab-nav.html" . }}

  {{/* 3. 滚动区域 */}}
  <div class="flex-1 w-full relative overflow-hidden">
    <div id="scroll-container" class="absolute inset-0 w-full h-full overflow-y-auto no-scrollbar scroll-smooth pt-2 pb-24">

      {{/* 移动端导航 (Mobile Tabs) */}}
      <div class="md:hidden sticky top-0 z-30 flex justify-center pb-6 pointer-events-none">
        <div class="inline-flex items-center p-1.5 bg-white/80 rounded-full backdrop-blur-xl border border-white/50 shadow-sm pointer-events-auto">
          {{/* Year */}}
          <a href="{{ "/posts/" | relLangURL }}" class="mobile-tab px-4 py-1.5 text-secondary no-underline font-medium text-sm">Year</a>
          <div class="w-px h-3 bg-black/10 mx-2"></div>

          {{/* Categories 高亮 */}}
          <a href="{{ "/categories/" | relLangURL }}" class="mobile-tab px-3 py-1.5 {{ if eq .Data.Singular "category" }}active text-white bg-brand shadow-sm{{ else }}text-secondary{{ end }}">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
          </a>

          {{/* Tags 高亮 */}}
          <a href="{{ "/tags/" | relLangURL }}" class="mobile-tab px-3 py-1.5 {{ if eq .Data.Singular "tag" }}active text-white bg-brand shadow-sm{{ else }}text-secondary{{ end }}">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path></svg>
          </a>

          {{/* Search */}}
          <a href="{{ "/search/" | relLangURL }}" class="mobile-tab px-3 py-1.5 text-secondary">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          </a>
        </div>
      </div>

      {{/* 主内容区域 */}}
      <div class="w-full max-w-5xl mx-auto px-4 sm:px-8">
        <div class="relative min-h-[400px]">

          {{/* 标题 */}}
          <div class="mb-10 text-center animate-fade-in-up mt-8">
            <span class="inline-block px-6 py-2 rounded-full bg-brand/5 text-brand font-bold text-2xl border border-brand/10 font-averia shadow-sm">
                {{ if eq .Data.Singular "category" }}All Categories{{ else }}All Tags{{ end }}
            </span>
          </div>

          {{/* 4. 调用胶囊标签云组件 */}}
          <div class="view-section">
            {{/* .Data.Terms 是有序列表，支持排序配置 */}}
            {{ partial "taxonomy.html" (dict "data" .Data.Terms "type" .Data.Singular) }}
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

{{ $js := resources.Get "js/list.js" | js.Build (dict "Minify" true) | resources.Fingerprint }}
<script src="{{ $js.RelPermalink }}" defer></script>
{{ end }}